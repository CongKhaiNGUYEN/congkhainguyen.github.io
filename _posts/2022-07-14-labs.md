---
title: Notes | Labs
author: Zeropio
date: 2022-07-14
permalink: /labs
---

This are my personal selection of **must have** tools for pentesting, bug bounty, CTFs or machines:

# Pentesting

## Linux

This is the path I choose while setting a Kali:

### Must have tools

This are a pack of tools I always use. Here are the basic utilities:
```console
zero@pio$ sudo apt install curl nmap neovim git sqsh pip python3-pip samba-client python3-ldap3 python3-yaml python3-impacket python3-venv freerdp2-x11 build-essential apt-utils cmake libfontconfig1 libglu1-mesa-dev libgtest-dev libspdlog-dev libboost-all-dev libncurses5-dev libgdbm-dev libssl-dev libreadline-dev libffi-dev libsqlite3-dev libbz2-dev mesa-common-dev qtbase5-dev qtchooser qt5-qmake qtbase5-dev-tools libqt5websockets5 libqt5websockets5-dev qtdeclarative5-dev golang-go qtbase5-dev libqt5websockets5-dev libspdlog-dev python3-dev libboost-all-dev mingw-w64 nasm sqlitebrowser mariadb-client-core-10.6 python2-minimal pipx mlocate smbmap powershell rlwrap redis-tools
```

Here the tools:
```console
zero@pio$ sudo apt install nmap hashcat ffuf hydra zaproxy seclists enum4linux smbclient eyewitness john evil-winrm sqlmap burpsuite chisel responder hydra wpscan exploitdb bloodhound neo4j wordlists windows-binaries mimikatz hash-identifier whatweb libimage-exiftool-perl foremost netdiscover proxychains hashid dirsearch sslscan pwncat
```

### Python tools

First some useful tools:
```console
zero@pio$ pip install pypykatz pycrypto uploadserver pipx
```

Now configure `pipx`:
```console
zero@pio$ pipx ensurepath
```

Install more tools:
```console
zero@pio$ pipx install crackmapexec
```

### Docker Tools

First install Docker:
```console
zero@pio$ sudo apt install -y docker.io
zero@pio$ sudo systemctl enable docker --now
zero@pio$ sudo usermod -aG docker $USER
```

Then we install **rustscan**:
```console
zero@pio$ rustscan/rustscan:latest
```

To use it add the alias:
```
alias rustscan='docker run -it --rm --name rustscan rustscan/rustscan:alpine'
```

### Made tools

Use impacket tools from any path:
```console
zero@pio$ git clone https://github.com/SecureAuthCorp/impacket
zero@pio$ cd impacket; sudo python3 -m pip install .
```

> Maybe you need to install crackmapexec after Impacket.
{: .prompt-tip}

Use kerbrute from any path:
```console
zero@pio$ wget https://github.com/ropnop/kerbrute/releases/download/v1.0.3/kerbrute_linux_amd64
zero@pio$ chmod +x ./kerbrute_linux_amd64; sudo mv kerbrute_linux_amd64 /usr/local/bin/kerbrute
```

To get chisel:
```console
zero@pio$ wget https://github.com/jpillora/chisel/releases/download/v1.7.7/chisel_1.7.7_linux_amd64.gz
zero@pio$ gzip -d chisel_1.7.7_linux_amd64.gz
zero@pio$ mv chisel_* /usr/local/bin/chisel && chmod +x /usr/local/bin/chisel
```

### Windows Utility

Download the scripts:
```console
zero@pio$ wget https://raw.githubusercontent.com/Kevin-Robertson/Inveigh/master/Inveigh.ps1
zero@pio$ wget https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/master/Recon/PowerView.ps1
zero@pio$ wget https://github.com/SnaffCon/Snaffler/releases/download/1.0.54/Snaffler.exe
zero@pio$ wget https://github.com/carlospolop/PEASS-ng/releases/download/20230101/winPEAS.bat
zero@pio$ wget https://github.com/carlospolop/PEASS-ng/releases/download/20230101/winPEASany.exe
```

The SysInternals Utility:
```console
zero@pio$ wget https://download.sysinternals.com/files/SysinternalsSuite.zip
zero@pio$ unzip SysinternalsSuite.zip
```

### Linux Utility

Download the scripts:
```console
zero@pio$ wget https://github.com/carlospolop/PEASS-ng/releases/download/20230102/linpeas.sh
zero@pio$ wget https://github.com/DominicBreuker/pspy/releases/download/v1.2.0/pspy32
zero@pio$ wget https://github.com/DominicBreuker/pspy/releases/download/v1.2.0/pspy64
```

### Firefox

Add the **Wappalyzer**, **FoxyProxy** and **Cookie Editor** to Firefox. Remove the `Ask to save login passwords...` and change the browser by DuckDuckGo.

Remember to download Burp (visiting `http://burp` with the proxy set) and ZAP (inside Settings) certs for the browser and install them.

### Rockyou

Unzip rockyou (`sudo gzip -d /usr/share/wordlists/rockyou.txt.gz`)

### CPU

For CPU usage in the machine (for hashcat) we need to install:
```
zero@pio$ sudo apt install libhwloc-dev ocl-icd-dev ocl-icd-opencl-dev pocl-opencl-icd
```

### Update the system

```console
zero@pio$ sudo apt update --fix-missing; sudo apt upgrade -y; sudo apt autoremove -y; sudo apt autoclean -y
```

---

# For Malware

Always keep these machines in a VM, for a safe controlled enviroment. Also keeps them host-only in a isolated network, recommendable to be a different IP range from the home network (for example **10.0.0....**). You may need to add the following lines to a created file `/etc/vbox/networks.conf`{: .filepath} to could be able to create the network:
```
* 10.0.0.0/8 192.168.0.0/16
* 2001::/64
```

## Development

Must have tools:

### Debuggers

Development:
- Visual Studio
- Notepad++

For debugging:
- [x32dbg](https://x64dbg.com/)
- [x64dbg](https://x64dbg.com/)
- [WinDBG Preview](https://learn.microsoft.com/en-us/windows-hardware/drivers/debugger/windbg-install-preview)
- [Immunity Debugger](https://www.immunityinc.com/products/debugger/)

Caves:
- [Cave Miner](https://github.com/Antonin-Deniau/cave_miner)

For reversing:
- [Cutter](https://github.com/rizinorg/cutter)
- [IDA](https://hex-rays.com/ida-free/)
- [Ghidra](https://ghidra-sre.org/)

Process:
- [PE-bear](https://hshrzd.wordpress.com/pe-bear/)
- [Resource Hacker](http://angusj.com/resourcehacker/)
- [Process Hacker 2](https://processhacker.sourceforge.io/)

Others:
- [dnSpy](https://github.com/dnSpy/dnSpy)
- [HxD](https://mh-nexus.de/en/hxd/)

---

## Analysis

The Linux host (REMnux) will be a Internet simulator, to make the malware thinks that he has Internet connection.

### Windows

For the Windows machine we will use [FlareVM](https://github.com/mandiant/flare-vm).

### Remnux

In this page, we can get the [REMnux](https://remnux.org/#distro) distro, for Malware Analysis. For simulate the network we will use `inetsim`. Go to the config file `/etc/inetsim/inetsim.conf`{: .filepath}. Uncomment the line:
```bash
start_service dns
```

In the **service_bind_address** uncomment the last line and change the IP to:
```bash
service_bind_address    0.0.0.0
```

In the **dns_default_ip** uncomment the last line and change the IP to the REMnux IP:
```bash
dns_default_ip          10.0.0.3
```

Now run the service:
```console
remnux@remnux:~$ inetsim
```

Then we can also download the **Mobile Security Framework - MobSF** from [Docker](https://hub.docker.com/r/opensecurity/mobile-security-framework-mobsf) as:
```console
remnux@remnux:~$ docker pull opensecurity/mobile-security-framework-mobsf
remnux@remnux:~$ docker run -it --rm -p 8000:8000 opensecurity/mobile-security-framework-mobsf:latest
```

If we go to Internet in the Windows VM and navigate to the Linux IP with http, https... we would see some default pages, meaning the service is working. If we search anything in the http and add **/<something>.exe** it will download an inetsim binary, to simulate for the malware a file downloading. Now change the default DNS for the Windows Host to be the REMnux, so if we type any domain it will redirect us to the inetsim default page.

---

Feel free to copy it and install.

> It will be increasing since I'm progressing.
{: .prompt-info }
